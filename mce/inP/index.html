<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="/resources/www_logo.png" type="image/png">
    <title>验证NeoMCE InP玩家许可</title>
    <!-- 引入 BootCDN 提供的 Bootstrap CSS -->
    <link href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            font-family: Arial, sans-serif;
            background: #f0f0f0;
            color: #333;
        }

        .container {
            text-align: center;
            padding: 2em;
            background: #fff;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            max-width: 500px;
            width: 100%;
        }

        .footer {
            margin-top: 2em;
            font-size: 0.9em;
            color: #666;
        }

        a {
            color: #007bff;
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }

        @media (max-width: 600px) {
            h2 {
                font-size: 1.5em;
            }

            p {
                font-size: 1em;
            }

            .container {
                padding: 1em;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <h2>MCENeo Program</h2>
        <hr>
        <p><b>内部计划（Project Inner）服务器的玩家许可是邀请制的，您可以在此查看是否收到了邀请</b></p>
        <p>
            在下方输入您的QQ号，如果您收到了邀请或主动受邀通过，您将会看到自己的游戏名。
            <br>
        <div class="input-group my-3">
            <input type="text" id="emailInput" class="form-control" placeholder="请输入QQ号">
            <div class="input-group-append">
                <button class="btn btn-primary" onclick="verifyQQ()">查询</button>
            </div>
        </div>
        <span id="result"></span>
        </p>
        <p id="applyNow" style="text-align: center; margin-top: 1em; font-size: 0.9em; color: #666;">
            或者
            <button class="btn btn-outline-secondary btn-sm" onclick="applyNow()">现在申请</button>
        </p>
        <hr>
        <span id="jinrishici-sentence">正在加载今日诗词....</span>
        <script src="https://sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8"></script>
    </div>
    <div class="footer">
        &copy; 2025 YIMC.TOP. All rights reserved(this page of Index only).
        <br>
        <div style="text-align: center;">
            <img src="/resources/moe_icon120.png" style="width:16px;height:16px;vertical-align:middle;">
            <a href="https://icp.gov.moe/?keyword=20251234"
                style="color: inherit; text-decoration: none;">萌ICP备20251234号</a>
        </div>
    </div>
    </div>

    <!-- 引入 BootCDN 提供的 Bootstrap JS 和依赖 -->
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.slim.min.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/popper.js/2.5.4/umd/popper.min.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            const urlParams = new URLSearchParams(window.location.search);
            const qq = urlParams.get('qq');
            if (qq) {
                document.getElementById('emailInput').value = qq;
            }
        });

        async function verifyQQ() {
            const qqInput = document.getElementById('emailInput').value;
            const result = document.getElementById('result');

            // 验证 QQ 号格式（5 到 11 位数字）
            const qqPattern = /^[1-9][0-9]{4,10}$/;
            if (!qqPattern.test(qqInput)) {
                result.textContent = '请输入有效的 QQ 号（5 到 11 位数字）。';
                result.style.color = 'red';
                return;
            }

            try {
                const response = await fetch('true.json');
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                const validQQs = await response.json();

                // 查找 QQ 号对应的用户名
                const user = validQQs.find(entry => entry.qq === qqInput);

                if (user) {
                    result.innerHTML = `验证成功！<br>您的游戏名是：${user.username}<br>许可证：${user.licence}`;
                    result.style.color = 'green';
                } else {
                    result.textContent = '验证失败，您暂未被邀请或申请暂未通过。';
                    result.style.color = 'red';
                }

            } catch (error) {
                result.textContent = '无法加载验证数据，请稍后再试。';
                result.style.color = 'yellow';
                console.error('There has been a problem with your fetch operation:', error);
            }
        }

        function applyNow() {
            const result = document.getElementById('result');
            const currentTime = new Date();
            const targetTime = new Date('2025-06-21T00:00:00+08:00'); // UTC+8 2025年6月21日0时0分

            if (currentTime >= targetTime) {
                // 跳转到申请页面，时间没到你还是填不了哈哈哈
                window.location.href = 'https://docs.qq.com/form/page/DSXB4UGNPR25mUW9v#/fill'; // 替换为实际的申请页面链接
            } else {
                // 提示未开放申请
                result.textContent = '申请尚未开放，请稍后再试。';
                result.style.color = 'GoldEnrod';
            }
        }
    </script>
</body>

</html>